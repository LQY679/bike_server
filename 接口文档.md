# 接口文档

## UserContrller

| 接口               | 描述                                                        | 类型  | 参数                                | 必填参数 | 返回类型 | 返回数据                                                     |
| ------------------ | ----------------------------------------------------------- | ----- | ----------------------------------- | -------- | -------- | ------------------------------------------------------------ |
| /getAllUser        | 获取user表的全部数据                                        | get   | 无                                  | 无       | JSON     | `msg`:查询成功返回true, 查询失败返回false,服务器内部错误返回err<br />`data`:只有在查询成功才会返回,会返回一个对象数组, 每个元素是一个用户对象 |
| /getUserById/{uid} | 根据用户uid返回对应的用户信息                               | get   | 字符串类型uid                       | all      | JSON     | `msg`:查询成功返回true, 查询失败返回false,服务器内部错误返回err<br />`data`:只有在查询成功才会返回,是一个用户对象 |
| /deleteUser/{uid}  | 根据参数删除一条用户记录                                    | delte | 字符串类型uid                       | all      | JSON     | `msg`:删除成功返回true, 删除失败返回false,服务器内部错误返回err |
| /addUser           | 根据传递的用户uid,密码pwd,用户类型type参数 添加一条用户记录 | post  | String uid, String pwd, String type | all      | JSON     | `msg`:添加成功返回true, 添加失败返回false,服务器内部错误返回err |
| /updateUser        | 根据传递的参数修改一条用户记录                              | put   | String uid, String pwd, String type | all      | JSON     | `msg`:修改成功返回true, 修改失败返回false,服务器内部错误返回err |



## BikeController

| 接口              | 描述                                   | 类型  | 参数                                                         | 必填参数 | 返回类型                       | 返回数据                                                     |
| ----------------- | -------------------------------------- | ----- | ------------------------------------------------------------ | -------- | ------------------------------ | ------------------------------------------------------------ |
| /getAllBike       | 获取bike表的所有数据                   | get   | 无                                                           | 无       | JSON数组                       | `msg`:查询成功返回true,查询失败返回false, 服务器内部错误返回err<br />`data`:此属性只有查询成功才会返回,返回一个车辆对象数组 |
| /getBikeById/{id} | 根据车辆编号参数返回一条车辆记录       | get   | String id                                                    | 无       | JSON对象<br />(无特殊说明下同) | `msg`:查询成功返回true,查询失败返回false, 服务器内部错误返回err<br />`data`:此属性只有查询成功才存在, 值是一个车辆对象 |
| /addBike          | 根据所传的车辆字段添加一条车辆信息数据 | post  | String id, int battery_Capacity, String state, String position |          |                                | `msg`:添加成功返回true,添加失败返回false, 服务器内部错误返回err<br /> |
| /deleteBike/{uid} | 根据传递的车辆id 参数删除一条车辆记录  | delte | Stirng id                                                    |          |                                | `msg`:删除成功返回true,删除失败返回false, 服务器内部错误返回err<br /> |
| /updateBike       | 根据传递的参数修改一条车辆信息         | put   | String id, int battery_Capacity, String state, String position |          |                                | `msg`:修改成功返回true,修改失败返回false, 服务器内部错误返回err |



**如下接口,无特殊说明则严格遵守统一业务响应结果集标准, 即:** 

```
*  业务统一结果集
*  code:
*      1xxx 表示业务处理成功
*      2xxx 表示业务处理失败
*      3xxx 表示参数存在问题
*      4xxx 表示内部服务存在异常
*  msg: 中文提示信息,表明具体的业务处理结果
*  sub: 英文提示信息,与msg类似,英文描述结果主题
*  data: 请求要返回的数据,如果不需要返回数据则或者请求失败返回null, 否则返回实际请求数据
```

## OrderController

| 接口url                | 类型 | 参数                                                        | 返回数据 | 描述                                                         |
| ---------------------- | ---- | ----------------------------------------------------------- | -------- | ------------------------------------------------------------ |
| /createOrder           | post | Body: order , 其中`order_id`和`order_start_time`是必填字段  | 无       | 创建订单                                                     |
| /stopOrder             | post | Body: order , 其中`order_id`, `amount`,`end_time`是必填字段 | 无       | 结束骑行计时,更新订单状态                                    |
| /deleteOrder           | get  | Param: `order_id`, 订单编号                                 | 无       | 根据订单编号删除指定的订单, **注意:订单不存在code为2000**    |
| /getAllOrder           | get  | 无                                                          | 订单列表 | 获取所有订单列表, **注意:查询为空code为2000**                |
| /getOrderByOrder_id    | get  | Param: `order_id`订单编号                                   | 订单对象 | 根据指定订单编号获取指定的订单信息, **注意:查询为空code为2000** |
| /getUnFinishOrderByUid | get  | Param: `uid`用户id                                          | 订单对象 | 查询指定用户未完成(即正在进行和待支付)的订单信息, **注意:查询为空code为2000** |

## PayController

| 接口url            | 类型 | 参数                                              | 返回数据         | 描述                                                         |
| ------------------ | ---- | ------------------------------------------------- | ---------------- | ------------------------------------------------------------ |
| /goPay             | 任意 | Param: `order_id`订单编号,  `amount`支付金额      | 支付页面html文本 | ==此接口不遵循统一业务响应结果集标准==,支付接口, 返回一个支付宝的官方请求页面内容**注意:此接口请用表单请求避免无法进行跳转** |
| /finishPay         | 任意 | 无                                                | 无               | ==此接口不遵循统一业务响应结果集标准==,**该接口无需前端调用,用户通过支付页面支付后由支付平台自动调用**, 并且更新订单状态,然后重定向回到首页,  如果订单状态更新失败,则回会在页面有信息提示,3秒后重定向到首页, |
| /reviewAliPayOrder | post | Param: `trade_no`支付平台交易号 ,  `order_id`订单 | 无               | 订单申诉接口, 当订单已经付款但订单状态未能及时更新时调用, 根据提供的订单编号和支付平台交易号查询订单是否已经付款,若已付款则更新订单订单状态, **申诉失败code为2000** |

